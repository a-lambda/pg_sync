name: pi52_psql
run-name: Installation de la base exercices postgreSQL
on:
  push:
    branches: main

jobs:
  restore-pgexercises-database:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Execute postgresql file
      run: |
        PGPASSWORD=$DB_PASSWORD psql -h $DB_HOSTNAME -d $DB_NAME -p $DB_PORT -U $DB_USER -f SQL/pi_restore_pgexercices.sql
      env: 
        DB_HOSTNAME: ${{ secrets.DB_HOSTNAME }}
        DB_USER: ${{ secrets.DB_USER }}
        DB_PASSWORD: ${{ secrets.DB_PASSWORD }}
        DB_PORT: ${{ secrets.DB_PORT }}
        DB_NAME: ${{ secrets.DB_NAME }}   
